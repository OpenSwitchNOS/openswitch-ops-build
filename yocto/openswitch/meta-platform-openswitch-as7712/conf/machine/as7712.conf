DEFAULTTUNE ?= "core2-64"
require conf/machine/include/tune-core2.inc
include conf/machine/include/x86-base.inc

# Include user enabled features
INHERIT += "openswitch-config"
SRC_URI = "${@get_ops_config_file(d)}"
EXTRA_IMAGE_FEATURES += "${@get_ops_config_symbols(d)}"

PREFERRED_PROVIDER_virtual/kernel ?= "linux-ops"
PREFERRED_VERSION_linux-ops ?= "3.9%"

GLIBC_ADDONS = "nptl"

IMAGE_FSTYPES = "cpio.gz tar.gz"

MACHINE_FEATURES = "pcbios usbhost acpi serial pci ext2 ext3 x86 vfat broadcom"
MACHINE_ESSENTIAL_EXTRA_RDEPENDS += " \
  packagegroup-ops-min \
  packagegroup-ops-min-debug \
  packagegroup-ops-config \
"

# Allow login root with no password
EXTRA_IMAGE_FEATURES +="debug-tweaks"

PREFERRED_PROVIDER_virtual/ops-switchd-switch-api-plugin ?= "ops-switchd-opennsl-plugin"

MACHINE_EXTRA_RRECOMMENDS += "dmidecode"
