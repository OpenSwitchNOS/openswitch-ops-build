From 5413325517531933cd23771c711e1e53054398a9 Mon Sep 17 00:00:00 2001
From: Suganya J S A <suganya.j-s-a@hpe.com>
Date: Tue, 16 Feb 2016 11:14:50 -0800
Subject: [PATCH 21/40] new: dev:OSPFv2 key and default definitions

Change-Id: I067bfb4cf9101254e0fbaae75b9cd7564fe1db41
Signed-off-by: Suganya J S A <suganya.j-s-a@hpe.com>
---
 lib/openswitch-dflt.h |  9 ++++++++-
 lib/openswitch-idl.h  | 28 +++++++++++++++++++++++++++-
 utilities/ovs-vsctl.c | 24 ++++++++++++++++++++++++
 3 files changed, 59 insertions(+), 2 deletions(-)

diff --git a/lib/openswitch-dflt.h b/lib/openswitch-dflt.h
index 2b4ad5e..78b38d5 100644
--- a/lib/openswitch-dflt.h
+++ b/lib/openswitch-dflt.h
@@ -1,5 +1,5 @@
 /*
- * Copyright (C) 2015 Hewlett-Packard Development Company, L.P.
+ * Copyright (C) 2015-2016 Hewlett-Packard Development Company, L.P.
  * All Rights Reserved.
  *
  *    Licensed under the Apache License, Version 2.0 (the "License"); you may
@@ -118,4 +118,11 @@
 #define OSPF_AREA_TYPE_NSSA_NO_SUMMARY       "nssa"
 #define OSPF_AREA_TYPE_STUB_NO_SUMMARY       "stub"
 
+#define OSPF_HELLO_INTERVAL_DEFAULT          10
+#define OSPF_DEAD_INTERVAL_DEFAULT           (4 * OSPF_HELLO_INTERVAL_DEFAULT)
+#define OSPF_TRANSMIT_DELAY_DEFAULT          1
+#define OSPF_RETRANSMIT_INTERVAL_DEFAULT     5
+#define OSPF_ROUTE_TYPE2_COST_DEFAULT        16777215
+#define OSPF_DEFAULT_COST                    10
+
 #endif /* OPENSWITCH_DFLT_HEADER */
diff --git a/lib/openswitch-idl.h b/lib/openswitch-idl.h
index 89eed96..a1df0de 100644
--- a/lib/openswitch-idl.h
+++ b/lib/openswitch-idl.h
@@ -1,5 +1,5 @@
 /*
- * Copyright (C) 2015 Hewlett-Packard Development Company, L.P.
+ * Copyright (C) 2015-2016 Hewlett-Packard Development Company, L.P.
  * All Rights Reserved.
  *
  *    Licensed under the Apache License, Version 2.0 (the "License"); you may
@@ -784,6 +784,32 @@ enum ospf_nbr_statistics_e {
 
 #define OSPF_KEY_ROUTER_STUB_ADV_STARTUP      "startup"
 
+#define OSPF_KEY_STUB_ROUTER_STATE_ACTIVE     "stub_router_state_active"
+#define OSPF_KEY_ROUTE_AREA_ID                "area_id"
+#define OSPF_KEY_ROUTE_TYPE_ABR               "area_type_abr"
+#define OSPF_KEY_ROUTE_TYPE_ASBR              "area_type_asbr"
+#define OSPF_KEY_ROUTE_EXT_TYPE               "ext_type"
+#define OSPF_KEY_ROUTE_EXT_TAG                "ext_tag"
+#define OSPF_KEY_ROUTE_TYPE2_COST             "type2_cost"
+
+#define OSPF_KEY_ROUTE_COST                   "cost"
+
+/* Neighbor options */
+#define OSPF_NBR_OPTION_STRING_T              "type_of_service"
+#define OSPF_NBR_OPTION_STRING_E              "external_routing"
+#define OSPF_NBR_OPTION_STRING_MC             "multicast"
+#define OSPF_NBR_OPTION_STRING_NP             "type_7_lsa"
+#define OSPF_NBR_OPTION_STRING_EA             "external_attributes_lsa"
+#define OSPF_NBR_OPTION_STRING_DC             "demand_circuits"
+#define OSPF_NBR_OPTION_STRING_O              "opaque_lsa"
+
+#define OSPF_PATH_TYPE_STRING_INTER_AREA      "inter_area"
+#define OSPF_PATH_TYPE_STRING_INTRA_AREA      "intra_area"
+#define OSPF_PATH_TYPE_STRING_EXTERNAL        "external"
+
+#define OSPF_EXT_TYPE_STRING_TYPE1            "ext_type_1"
+#define OSPF_EXT_TYPE_STRING_TYPE2            "ext_type_2"
+
 /******************************** NTP START **********************************/
 /****************************** NTP_KEY TABLE ********************************/
 #define NTP_KEY_KEY_PASSWORD_LEN_MIN                    8
diff --git a/utilities/ovs-vsctl.c b/utilities/ovs-vsctl.c
index 42925a5..d404b8f 100644
--- a/utilities/ovs-vsctl.c
+++ b/utilities/ovs-vsctl.c
@@ -1448,6 +1448,22 @@ static struct cmd_show_table cmd_show_tables[] = {
       &ovsrec_ospf_route_col_prefix},
      {NULL, NULL, NULL}
     },
+    {&ovsrec_table_route,
+     &ovsrec_route_col_address_family,
+     {
+      &ovsrec_route_col_distance,
+      &ovsrec_route_col_from,
+      &ovsrec_route_col_metric},
+     {NULL, NULL, NULL}
+    },
+    {&ovsrec_table_nexthop,
+     &ovsrec_nexthop_col_external_ids,
+     {
+      &ovsrec_nexthop_col_status,
+      &ovsrec_nexthop_col_selected,
+      &ovsrec_nexthop_col_weight},
+     {NULL, NULL, NULL}
+    },
 #endif
     {&ovsrec_table_manager,
      &ovsrec_manager_col_target,
@@ -3448,6 +3464,14 @@ static const struct ctl_table_class tables[] = {
      {{&ovsrec_table_ospf_route,
        &ovsrec_ospf_route_col_paths, NULL},
      {NULL, NULL, NULL}}},
+     {&ovsrec_table_route,
+     {{&ovsrec_table_route,
+       &ovsrec_route_col_from, NULL},
+     {NULL, NULL, NULL}}},
+     {&ovsrec_table_nexthop,
+     {{&ovsrec_table_nexthop,
+       &ovsrec_nexthop_col_external_ids, NULL},
+     {NULL, NULL, NULL}}},
 #endif
     {&ovsrec_table_interface,
      {{&ovsrec_table_interface, &ovsrec_interface_col_name, NULL},
-- 
2.1.4

