From 2da219def4d11d16d286a3e251316751ab93d991 Mon Sep 17 00:00:00 2001
From: Nehal Patel <nehal@hpe.com>
Date: Thu, 5 Nov 2015 22:23:06 -0800
Subject: [PATCH 15/40] Add Resilient ECMP CLI

Add the hooks in switchd to get Resilient ECMP
flag updates and pass the params down through
to the platform plugin

CLI:
[no] ip ecmp load-balance resilient disable

Change-Id: Ie12c34261af39f90a0b81f8066eeac8cecbd598c
Signed-off-by: Nehal Patel <nehal@hpe.com>
---
 lib/openswitch-idl.h | 1 +
 ofproto/ofproto.h    | 1 +
 2 files changed, 2 insertions(+)

diff --git a/lib/openswitch-idl.h b/lib/openswitch-idl.h
index c4f1e97..8f94ef6 100644
--- a/lib/openswitch-idl.h
+++ b/lib/openswitch-idl.h
@@ -587,6 +587,7 @@ enum ovsrec_port_config_admin_e {
 #define SYSTEM_ECMP_CONFIG_HASH_SRC_PORT                  "hash_srcport_enabled"
 #define SYSTEM_ECMP_CONFIG_HASH_DST_IP                    "hash_dstip_enabled"
 #define SYSTEM_ECMP_CONFIG_HASH_DST_PORT                  "hash_dstport_enabled"
+#define SYSTEM_ECMP_CONFIG_HASH_RESILIENT                 "resilient_hash_enabled"
 #define SYSTEM_ECMP_CONFIG_ENABLE_DEFAULT                 "true"
 
 /************************************************************************/
diff --git a/ofproto/ofproto.h b/ofproto/ofproto.h
index a356470..53aa127 100644
--- a/ofproto/ofproto.h
+++ b/ofproto/ofproto.h
@@ -267,6 +267,7 @@ struct ofproto_route {
 #define OFPROTO_ECMP_HASH_DSTPORT        0x2     /* source L4 port */
 #define OFPROTO_ECMP_HASH_SRCIP          0x4     /* source IP v4/v6 */
 #define OFPROTO_ECMP_HASH_DSTIP          0x8     /* source IP v4/v6 */
+#define OFPROTO_ECMP_HASH_RESILIENT      0x10    /* resilient hashing */
 
 enum ofproto_host_action {
     OFPROTO_HOST_ADD,
-- 
2.1.4

